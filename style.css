:root {
  --primary-color: #ff4d6d;
  --background-color: #000000;
  --card-bg: #111111;
  --text-color: #ffffff;
}

* { box-sizing: border-box; }

body {
  margin: 0; padding: 0;
  background-color: var(--background-color);
  font-family: 'Quicksand', sans-serif;
  color: var(--text-color);
  display: flex; justify-content: center; align-items: center;
  width: 100vw; height: 100vh; overflow: hidden;
}

.main-container {
  width: 100%; max-width: 500px; height: 100%;
  display: flex; justify-content: center; align-items: center;
  position: relative;
}

.screen {
  position: absolute; width: 100%; height: 100%;
  display: flex; flex-direction: column; justify-content: center; align-items: center;
  opacity: 0; pointer-events: none; /* Estado inicial: oculto */
  transition: transform 0.8s, opacity 0.5s;
}

.screen.active {
  opacity: 1; pointer-events: all; /* Estado activo: visible */
}

/* ESTILO DEL SOBRE (Página 1) */
.envelope-wrapper { perspective: 1000px; }
.envelope {
  position: relative; width: 300px; height: 180px;
  background-color: #b91c1c; box-shadow: 0 10px 40px rgba(0,0,0,0.6);
  cursor: pointer;
}
.flap {
  position: absolute; top: 0; width: 0; height: 0;
  border-left: 150px solid transparent; border-right: 150px solid transparent;
  border-top: 110px solid #991b1b; z-index: 3;
  transform-origin: top; transition: transform 0.6s ease-in-out;
}
.pocket {
  position: absolute; bottom: 0; width: 300px; height: 180px;
  background-color: #b91c1c; z-index: 2; border-radius: 0 0 15px 15px;
}
.letter-preview {
  position: absolute; bottom: 10px; left: 10px;
  width: 280px; height: 160px; background: #fff;
  z-index: 1; transition: transform 0.8s ease-in-out;
  display: flex; flex-direction: column; justify-content: center; align-items: center;
  padding: 15px; text-align: center; color: #000;
}

/* Imagen im1 en la esquina superior derecha */
.im1-corner {
  position: absolute; top: 10px; right: 10px;
  width: 45px; height: 45px; object-fit: cover; border-radius: 5px;
  border: 1px solid #ddd;
}

.emergency-text { color: #ff0000; font-weight: bold; font-size: 0.85rem; margin-bottom: 5px; }
.click-instruction { font-size: 0.75rem; color: #666; margin-bottom: 10px; font-style: italic; }
.btn-red-open {
  background: #ff0000; color: white; border: none; padding: 12px 25px;
  border-radius: 5px; cursor: pointer; font-weight: bold; font-size: 1rem;
  box-shadow: 0 5px 15px rgba(255,0,0,0.4); animation: pulse 1s infinite;
}

@keyframes pulse { 0% { transform: scale(1); } 50% { transform: scale(1.05); } 100% { transform: scale(1); } }

/* ANIMACIÓN DE ABRIR */
.envelope.open .flap { transform: rotateX(180deg); z-index: 0; }
.envelope.open .letter-preview { transform: translateY(-130px); z-index: 2; }

/* HISTORIA DINÁMICA (Manteniendo configuraciones previas) */
.story-card {
  background: var(--card-bg); width: 92%; max-height: 95vh;
  padding: 25px; border-radius: 20px; border: 1px solid #333;
  display: flex; flex-direction: column; align-items: center; justify-content: space-between;
}
#image-wrapper img { max-width: 100%; max-height: 200px; border-radius: 10px; object-fit: contain; }
.controls { width: 100%; display: flex; flex-direction: column; align-items: center; gap: 10px; margin-top: auto; }
.btn { background: transparent; color: var(--primary-color); border: 2px solid var(--primary-color); width: 85%; padding: 14px; border-radius: 10px; font-weight: bold; font-size: 1.1rem; }

.hidden { display: none !important; }
.theme-gamer-choice .story-card, .theme-gamer-missions .story-card { border: 4px solid #00ff00; }
.gamer-btn-main { font-family: 'Press Start 2P', cursive; color: #00ff00; border: 3px solid #00ff00; padding: 15px; font-size: 0.8rem; width: 90%; animation: blink 0.8s infinite; background: transparent; }
.mission-btn { font-family: 'Press Start 2P', cursive; width: 100%; font-size: 0.55rem; margin: 5px 0; padding: 10px; background: transparent; color: #0ff; border: 1px solid #0ff; }
.btn-final-yes { background: #ff4d6d; color: white; border: none; padding: 15px 30px; border-radius: 50px; font-size: 1.4rem; }
@keyframes blink { 0%, 100% { border-color: #0ff; color: #0ff; } 50% { border-color: #f0f; color: #f0f; } }
@keyframes alarm { 0% { background: rgba(255,0,0,0.1); } 50% { background: rgba(0,0,255,0.1); } 100% { background: rgba(255,0,0,0.1); } }
#emergency-light { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: 100; pointer-events: none; animation: alarm 0.5s infinite; }
